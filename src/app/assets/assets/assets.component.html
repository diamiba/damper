<h2>Toutes vos immobilisations</h2>
<div *ngIf="!noAsset">
    <nz-row [nzGutter]="16">
        <nz-col [nzSpan]="8">
            <nz-statistic [nzValue]="(dataService.totalAssetsValue$ | async).totalValue | number: '1.0-2'"
                [nzTitle]="'Valeur du parc immobilier'"></nz-statistic>
        </nz-col>
        <nz-col [nzSpan]="8">
            <nz-statistic [nzValue]="(dataService.totalAssetsValue$ | async).dotationsAsToday | number: '1.0-2'"
                [nzTitle]="'Total des amortissements'"></nz-statistic>
        </nz-col>
        <nz-col [nzSpan]="8">
            <nz-statistic [nzValue]="(dataService.totalAssetsValue$ | async).vna | number: '1.0-2'"
                [nzTitle]="'Valeur nette d\'ammortissement'"></nz-statistic>
        </nz-col>
    </nz-row>
    <nz-divider></nz-divider>
        <div class="text-center my-1">
            <button nz-button nzType="primary" class="mx-auto" (click)="newAsset()">
                    <i nz-icon nzType="plus-square" nzTheme="fill"></i>
                    Ajouter une immobilisation</button>
            <button nz-button nzType="primary" class="mx-auto" (click)="exportAsXlsx()" [disabled]="noAsset">
                    <i nz-icon nzType="download" nzTheme="outline"></i>
                    Exporter la liste en xlsx</button>
        </div>
    <nz-list class="demo-loadmore-list" [nzDataSource]="dataService.assets$ | async" [nzItemLayout]="'horizontal'"
        [nzLoading]="isLoading" [nzRenderItem]="item">
        <ng-template #item let-item>
            <nz-list-item [nzContent]="" [nzActions]="isLoading ? '' : [seeAction, moreAction, deleteAction]">
                <nz-skeleton [nzAvatar]="true" [nzActive]="true" [nzTitle]="false" [nzLoading]="isLoading">
                    <ng-template #seeAction><a routerLink="details/{{item.id}}">voir</a></ng-template>
                    <ng-template #moreAction><a (click)="editAssetDetails(item)">modifier</a></ng-template>
                    <ng-template #deleteAction><a (click)="deleteAsset(item)">supprimer</a></ng-template>
                    <nz-list-item-meta [nzTitle]="nzTitle"
                        nzDescription="Ajouté le {{item.addedDate | date:'EEEE d MMMM y, à HH\'h\'mm\'mn\''}}">
                        <ng-template #nzTitle>
                            <a routerLink="details/{{item.id}}">{{ item.name }}</a>
                        </ng-template>
                    </nz-list-item-meta>
                </nz-skeleton>
            </nz-list-item>
        </ng-template>
    </nz-list>
</div>

<div *ngIf="noAsset" class="text-center">
    <nz-empty [nzNotFoundImage]="
          'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original'
        " [nzNotFoundContent]="contentTpl" [nzNotFoundFooter]="footerTpl">
        <ng-template #contentTpl>
            <span> Aucune immobilisation pour le moment ! Vous pouvez en rajouter en cliquant sur le boutton ci-dessous. </span>
        </ng-template>
        <ng-template #footerTpl>
            <button nz-button nzType="primary" (click)="newAsset()">Ajouter une nouvelle immobilisation</button>
        </ng-template>
    </nz-empty>
</div>
